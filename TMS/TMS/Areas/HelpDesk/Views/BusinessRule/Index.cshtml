@model TMS.Models.BusinessRule
@{
    Layout = "~/Areas/HelpDesk/Views/Shared/_Layout.cshtml";
    ViewBag.Title = "BUSINESS RULES";
}

<style>
    
</style>

<div class="row">
    <div class="col-xs-12">
        <div class="box box-solid">
            <div class="box-body" style="display: block;">
                <a class="btn bg-olive btn-flat" style="display: inline-block;" href='@Url.Action("New", "BusinessRule")'>
                    <i class="fa fa-plus" aria-hidden="true"></i> New Business Rules
                </a>
                <a class="btn bg-olive btn-flat margin-left10 disabled" style="display: inline-block;" data-role="btn-organize">
                    Organize Business Rules
                </a>
                <table class="table" id="rules-table">
                    <thead>
                        <tr>
                            <th style="width: 5%;" />
                            <th style="width: 25%;">Rule Name</th>
                            <th style="width: 50%;">Description</th>
                            <th style="width: 20%;">Actions</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
            <!-- /.box-body -->
        </div>
        <!-- /.box -->
    </div>
    <!-- /.col -->
</div>
<!-- /.row -->

@section Scripts {

    <script>

        var rulesTable = null;

        function initRulesTable() {
            rulesTable = $("#rules-table")
                .DataTable({
                    serverSide: true,
                    processing: true,
                    sort: true,
                    filter: false,
                    searching: true,
                    lengthMenu: [7],
                    order: [[1, 'des']],
                    lengthChange: false,
                    ajax: {
                        "url": "/HelpDesk/BusinessRule/LoadAll",
                        "type": "POST",
                        "data": function(d) {
                        }
                    },
                    drawCallback: function() {
                    },
                    columnDefs: [
                        {
                            "targets": [0],
                            "sortable": false,
                            "render": function(data, type, row) {
                                return '<input type="checkbox" data-role="cbo-rules" data-id="' +
                                    row.Id + '"/>';
                            }
                        },
                        {
                            "targets": [1],
                            "render": function (data, type, row) {
                                return row.Name;
                            }
                        },
                        {
                            "targets": [2],
                            "sortable": false,
                            "render": function (data, type, row) {
                                return row.Description;
                            }
                        },
                        {
                            "targets": [3],
                            "sortable": false,
                            "render": function (data, type, row) {
                                return "-";
                            }
                        }
                    ]
                });
        };

        $(document)
            .ready(function() {
                setActiveTicketMenu();
                initRulesTable();
            });
    </script>
}